!function(){"use strict";const t=(r,t)=>{let i=1;var e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(`
        .footnote-highlight {
            background-color: yellow !important;
        }
    `)),document.head.appendChild(e),r.ui.registry.addButton("a11y-footnotes",{text:"Footnote",onAction:()=>{const l=r.selection.getContent({format:"text"});l?r.windowManager.open({title:"Insert Footnote",body:{type:"panel",items:[{type:"input",name:"footnoteText",label:"Footnote Text"}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:"Save",primary:!0}],onSubmit:function(t){var e,o,n,a=t.getData();e=l,a=a.footnoteText,o="footnote-"+(new Date).getTime(),n=i++,e=`<span>${e}<a id="footnote-entry-${o}-ref" role="doc-noteref" aria-labelledby="footnote-entry-${o}" href="#footnote-entry-${o}"><sup>[${n}]</sup></a></span>`,n=`
            <li id="footnote-entry-${o}">
                <a id="footnote-entry-${o}">
                    
                </a>
                ${a}
                <a role="doc-backlink" href="#footnote-entry-${o}-ref" aria-label="Back to content">â†µ</a>
            </li>`,r.insertContent(e),(a=r.dom.select('section[role="doc-footnotes"] ol')[0])?a.innerHTML+=n:r.setContent(r.getContent()+`<hr /><section role="doc-footnotes" aria-label="footnotes">
                <h3 class="sr-only" id="footnotes-block-${o}">Footnotes</h3>
                <ol>${n.trim()}</ol>
            </section>`),t.close()}}):r.windowManager.alert("Please select a word or text to add a footnote.")}}),r.on("input",function(){const o=r.dom.select('a[role="doc-noteref"]').map(t=>t.id.replace("-ref",""));r.dom.select('li[id^="footnote-"]').forEach(t=>{var e=t.id;o.includes(e)||r.dom.remove(t)});var t=r.dom.select('section[role="doc-footnotes"]')[0];t&&0===t.querySelectorAll("li").length&&r.dom.remove(t)})};tinymce.PluginManager.add("a11y-footnotes",t)}();