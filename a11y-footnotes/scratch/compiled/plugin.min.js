!function(){"use strict";const e=(l,e)=>{let c=1;var t=document.createElement("style");function i(){l.dom.select('a[role="doc-noteref"]').forEach((e,t)=>{var o=e,e=e.querySelector("sup");e&&(e.textContent=`[${t+1}]`),o.href="#footnote-entry-"+(t+1),o.id=`footnote-entry-${t+1}-ref`}),l.dom.select('li[id^="footnote-"]').forEach((e,t)=>{e.id="footnote-entry-"+(t+1);e=e.querySelector('a[role="doc-backlink"]');e&&(e.href=`#footnote-entry-${t+1}-ref`)})}t.type="text/css",t.appendChild(document.createTextNode(`
        .footnote-highlight {
            background-color: yellow !important;
        }
    `)),document.head.appendChild(t),l.ui.registry.addButton("a11y-footnotes",{icon:"footnote",onAction:()=>{const a=l.selection.getContent({format:"text"});a?l.windowManager.open({title:"Insert Footnote",body:{type:"panel",items:[{type:"input",name:"footnoteText",label:"Footnote Text"}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",text:"Save",primary:!0}],onSubmit:function(e){var t=e.getData(),o=a,t=t.footnoteText,n="footnote-"+(new Date).getTime(),r=c++,o=`<span>${o}<a id="footnote-entry-${n}-ref" role="doc-noteref" aria-labelledby="footnote-entry-${n}" href="#footnote-entry-${n}"><sup>[${r}]</sup></a></span>`,r=`
            <li id="footnote-entry-${n}">
                <span contenteditable="true">${t}</span>
                <a role="doc-backlink" href="#footnote-entry-${n}-ref" aria-label="Back to content">â†µ</a>
            </li>`;l.insertContent(o),(t=l.dom.select('section[role="doc-footnotes"] ol')[0])?t.innerHTML+=r:l.setContent(l.getContent()+`<hr /><section role="doc-footnotes" aria-label="footnotes" contenteditable="false">
                <h3 class="sr-only" id="footnotes-block-${n}">Footnotes</h3>
                <ol>${r.trim()}</ol>
            </section>`),i(),e.close()}}):l.windowManager.alert("Please select a word or text to add a footnote.")}}),l.on("input",function(){const o=l.dom.select('a[role="doc-noteref"]').map(e=>e.id.replace("-ref",""));l.dom.select('li[id^="footnote-"]').forEach(t=>{var e=t.id;o.includes(e)||l.windowManager.confirm("The reference number for this footnote has been deleted. Do you want to delete the footnote as well?",function(e){e&&l.dom.remove(t)})});var e=l.dom.select('section[role="doc-footnotes"]')[0];e&&0===e.querySelectorAll("li").length&&l.dom.remove(e),i()})};tinymce.PluginManager.add("a11y-footnotes",e)}();